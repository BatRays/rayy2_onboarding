/*
 * TMP61Thermistor
 *
 *  Created on: Pi Day, 2021
 *      Author: Priyal
 *
 *  Class for the TMP6131ELPGMQ1 PTC thermistors.
 *  Contains the resistor lookup table generated from Thermistor Design Tool provided by TI.
 *
 *  https://www.ti.com/lit/ds/symlink/tmp61-q1.pdf?ts=1613713635506&ref_url=https%253A%252F%252Fwww.ti.com%252Fstore%252Fti%252Fen%252Fp%252Fproduct%252F%253Fp%253DTMP6131ELPGMQ1
 */

#ifndef COMMON_API_TMP61THERMISTOR_H_
#define COMMON_API_TMP61THERMISTOR_H_

#include <mbed.h>

#define NUM_DEGREES_CELCIUS	171


// Indexes in the Lookup table correspond to the Degrees Celcius
static const uint16_t resistanceLookup[NUM_DEGREES_CELCIUS] = {
		8516, // 0 C
		8570,
		8624,
		8679,
		8733,
		8788,
		8844,
		8899,
		8955,
		9011,
		9067,
		9124,
		9181,
		9238,
		9296,
		9354,
		9412,
		9470,
		9529,
		9588,
		9648,
		9707,
		9767,
		9827,
		9888,
		9949,
		10010,
		10071,
		10133,
		10195,
		10258,
		10320,
		10383,
		10447,
		10510,
		10574,
		10638,
		10703,
		10768,
		10833,
		10899,
		10964,
		11031,
		11097,
		11164,
		11231,
		11298,
		11366,
		11434,
		11503,
		11571,
		11640,
		11710,
		11779,
		11850,
		11920,
		11991,
		12062,
		12133,
		12205,
		12277,
		12349,
		12422,
		12495,
		12568,
		12642,
		12716,
		12790,
		12865,
		12940,
		13016,
		13091,
		13167,
		13244,
		13321,
		13398,
		13475,
		13553,
		13631,
		13710,
		13789,
		13868,
		13948,
		14028,
		14108,
		14189,
		14270,
		14351,
		14433,
		14515,
		14597,	// 90 C
		14680,
		14763,
		14847,
		14931,
		15015,
		15100,
		15185,
		15270,
		15356,
		15442,
		15529,
		15616,
		15703,
		15790,
		15878,
		15967,
		16056,
		16145,
		16234,
		16324,
		16414,
		16505,
		16596,
		16688,
		16779,
		16872,
		16964,
		17057,
		17150,
		17244,
		17338,
		17433,
		17528,
		17623,
		17719,
		17815,
		17911,
		18008,
		18106,
		18203,
		18301,
		18400,
		18499,
		18598,
		18698,
		18798,
		18898,
		18999,
		19101,
		19202,
		19304,
		19407,
		19510,
		19613,
		19717,
		19821,
		19926,
		20031,
		20136,
		20242,
		20348,
		20455,
		20562,
		20670,
		20778,
		20886,
		20995,
		21104,
		21214,
		21324,
		21435,
		21546,
		21657,
		21769,
		21881,
		21994,
		22107,
		22220,
		22334,
		22449	// 170 C
};

/*
 * convertToDegreesCTMP61 takes in the resistance of the thermistor and converts it to a temperature in degrees C
 * Range is from 0 - 170C
 *
 * @param thermResistance is the calculted resistance of the thermistor
 * @returns 0 if actually 0C or if out of range (since the car will likely not be operating at 0C,
 * otherwise returns the temperature in 0.01 degrees Celcius
 */
uint16_t convertToDegreesCTMP61(uint16_t thermResistance);


#endif /* COMMON_API_TMP61THERMISTOR_H_ */
